<!doctype html>
<html lang = "ko" xmlns:th = "http://www.thymeleaf.org" xmlns:layout = "http://www.w3.org/1999/xhtml" >
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title layout:title-pattern = "$CONTENT_TITLE | $LAYOUT_TITLE" th:text = "Heal_Mingle" ></title >

	<!-- ì œì´ì¿¼ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸° -->
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" ></script >
	<!-- LodashëŠ” _ ê°ì²´ë¥¼ í†µí•´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ ì§€ì›í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µ-->
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js" ></script >

	<!-- toastr ë¶ˆëŸ¬ì˜¤ê¸° -->
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js" ></script >
	<link rel = "stylesheet" href = "https://jhs512.github.io/toastr/toastr.css" >

	<!-- í°íŠ¸ì–´ì¸ ì•„ì´ì½˜ -->
	<link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" >

	<!-- ê¸€ê¼´ -->
	<link href = "https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel = "stylesheet" />

	<!--  í’€í˜ì´ì§€ css, js -->
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.0/fullpage.min.js"
			integrity = "sha512-HqbDsHIJoZ36Csd7NMupWFxC7e7aX2qm213sX+hirN+yEx/eUNlZrTWPs1dUQDEW4fMVkerv1PfMohR1WdFFJQ=="
			crossorigin = "anonymous" ></script >
	<link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.0/fullpage.css"
		  integrity = "sha512-hGBKkjAVJUXoImyDezOKpzuY4LS1eTvJ4HTC/pbxn47x5zNzGA1vi3vFQhhOehWLTNHdn+2Yqh/IRNPw/8JF/A=="
		  crossorigin = "anonymous" />


	<!-- ë²„íŠ¼, ê¸€ê¼´ ìŠ¤íƒ€ì¼ -->
	<style >
		@font-face {
			font-family: 'GmarketSansMedium';
			src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
			font-weight: normal;
			font-style: normal;
		}

		html > body {
			font-family: "GmarketSansMedium";
			text-underline-position: under;
		}

		  button {
		  margin: 20px;
		  outline: none;
		}
		.custom-btn {
		  height: 40px;
		  padding: 10px 25px;
		  border: 2px solid #000;
		  background: transparent;
		  cursor: pointer;
		  transition: all 0.3s ease;
		  position: relative;
		  display: inline-block;
		}

		/* 5 */
		.btn-5 {
		  line-height: 42px;
		  padding: 0;
		  border: none;
		}
		.btn-5:hover {
		  background: transparent;
		  color: #000;
		  box-shadow: -7px -7px 20px 0px #fff9, -4px -4px 5px 0px #fff9,
			7px 7px 20px 0px #0002, 4px 4px 5px 0px #0001;
		}
		.btn-5:before,
		.btn-5:after {
		  content: "";
		  position: absolute;
		  top: 0;
		  right: 0;
		  height: 2px;
		  width: 0;
		  background: #000;
		  transition: 400ms ease all;
		}
		.btn-5:after {
		  right: inherit;
		  top: inherit;
		  left: 0;
		  bottom: 0;
		}
		.btn-5:hover:before,
		.btn-5:hover:after {
		  width: 100%;
		  transition: 800ms ease all;
		}

	</style >
</head >

<!-- í…Œì¼ìœˆë“œ , ë°ì´ì§€ UI-->
<link href = "https://cdn.jsdelivr.net/npm/daisyui@3.7.7/dist/full.css" rel = "stylesheet" type = "text/css" />
<script src = "https://cdn.tailwindcss.com" ></script >

<script src = "/resource/common/common.js" ></script >

<body >

<div class="flex flex-col">
	<header >
		<!-- navbar -->
		<div class = "navbar shadow-md shadow-inner flex justify-between" >
			<!--  logo  -->
			<div class = "p-3 h-8" >
				<a href = "/" >
					<img src = "/resource/logoImg/NoColorLogo.png" class = "object-cover w-full h-full" alt = "ë¡œê³ " >
				</a >
			</div >
			<!--  menu  -->
			<div class = "flex justify-evenly w-full text-lg" >
				<div >
					<a href = "#" >ììœ  ê²Œì‹œíŒ</a >
				</div >
				<div >
					<a href = "#" >ê³µì§€ì‚¬í•­</a >
				</div >
			</div >
			<!--  profile img/ search input  -->
			<div class = "p-3" >
				<div class = "flex items-center md:ml-auto md:pr-4" >
					<div class = "relative flex flex-wrap items-stretch w-full transition-all rounded-lg ease-soft" >
						<input type = "text"
							   class = "pl-3 text-sm focus:outline-slate-500 placeholder:text-slate-500 ease-soft w-1/100 leading-5.6 relative -ml-px block min-w-0 flex-auto rounded-lg border border-solid  bg-clip-padding py-2 pr-3 transition-all focus:outline-none focus:transition-shadow"
							   placeholder = "ğŸ”     ê¶ê¸ˆì„ ê²€ìƒ‰í•˜ì„¸ìš”" />
					</div >
				</div >
				<div class = "dropdown dropdown-end" >
					<div tabindex = "0" class = "btn btn-ghost btn-circle avatar" >
						<!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
						<div class = "w-10 rounded-full" >
							<img alt = "Tailwind CSS Navbar component"
								 src = "https://daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
						</div >
					</div >
					<!-- ë©”ë‰´ -->
					<ul tabindex = "0"
						class = "menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52" >
						<li th:if="${@rq.logout}"><a href = "/usr/member/join" ><i
								class = "fa-solid fa-user-plus" ></i > íšŒì›ê°€ì…</a ></li >
						<li th:if="${@rq.logout}"><a href = "/usr/member/login" ><i
								class = "fa-solid fa-arrow-right-to-bracket" ></i > ë¡œê·¸ì¸</a ></li >
						<li th:if="${@rq.admin}"><a ><i class = "fa-solid fa-user-secret" ></i >ê´€ë¦¬ì</a ></li >
						<li th:if="${@rq.login}"><a ><i class = "fa-solid fa-user" ></i >ë‚´ ì •ë³´</a ></li >
						<li th:if="${@rq.login}"><a href = "/usr/member/logout" ><i
								class = "fa-solid fa-arrow-right-from-bracket" ></i >ë¡œê·¸ì•„ì›ƒ</a ></li >
					</ul >
				</div >
			</div >
		</div >
	</header >
	<!-- fragment -->
	<main class = "mb-3" >
		<th:block layout:fragment = "content" ></th:block >
	</main >
</div >

<script >
	// URLì—ì„œ msg íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    function getMsgFromURL() {
        const url = new URL(window.location.href);
        return url.searchParams.get('msg');
    }

    function getFailMsgFromURL() {
        const url = new URL(window.location.href);
        return url.searchParams.get('failMsg');
    }

    const msg = getMsgFromURL();

    // msg íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ ìˆìœ¼ë©´ toastrë¡œ ì•Œë¦¼ì„ í‘œì‹œ
    if (msg) {
        toastNotice(decodeURIComponent(msg));
    }

    const failMsg = getFailMsgFromURL();

    // msg íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ ìˆìœ¼ë©´ toastrë¡œ ì•Œë¦¼ì„ í‘œì‹œ
    if (failMsg) {
        toastWarning(decodeURIComponent(failMsg));
    }

	// historyBack ìœ¼ë¡œ ì¸í•´ ëŒì•„ì˜¨ ê²½ìš° ì‹¤í–‰
	// í˜ì´ì§€ê°€ í‘œì‹œë  ë•Œë§ˆë‹¤ íŠ¹ì • ì¡°ê±´ í•˜ì— ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ê²€ìƒ‰í•˜ì—¬ í™”ë©´ì— í‘œì‹œí•˜ê³ , í•´ë‹¹ ë©”ì‹œì§€ë¥¼
	// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì œê±°í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰
	// í˜ì´ì§€ê°€ ìƒˆë¡œ ë¡œë“œë˜ê±°ë‚˜ ìºì‹œì—ì„œ ë³µì›ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë°”ì¸ë“œí•©ë‹ˆë‹¤.
	$(window).bind("pageshow", function (event){
	  // í˜„ì¬ í˜ì´ì§€ì˜ URLì„ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
	  let localStorageKeyAboutHistoryBackFailMsg = "historyBackFailMsg___" + location.href;

	  // í•´ë‹¹ í‚¤ì— ëŒ€í•œ í•­ëª©ì´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì—†ëŠ” ê²½ìš°, 'null'ì„ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ í‚¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
	  if (!localStorage.getItem(localStorageKeyAboutHistoryBackFailMsg)) {
		localStorageKeyAboutHistoryBackFailMsg = "historyBackFailMsg___null";
	  }

	  // ì„¤ì •ëœ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
	  const historyBackFailMsg = localStorage.getItem(localStorageKeyAboutHistoryBackFailMsg);
	  // ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°
	  if (historyBackFailMsg) {
		toastWarning(historyBackFailMsg);
		// ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤(toastr ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©).
		localStorage.removeItem(localStorageKeyAboutHistoryBackFailMsg);
		// ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œ í›„ í•´ë‹¹ í•­ëª©ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.
	  }
	});
</script >

</body >
</html >